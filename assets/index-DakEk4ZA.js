(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const F="modulepreload",v=function(t){return"/shrimpy/"+t},I={},C=function(o,n,l){let e=Promise.resolve();if(n&&n.length>0){let p=function(i){return Promise.all(i.map(a=>Promise.resolve(a).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");e=p(n.map(i=>{if(i=v(i),i in I)return;I[i]=!0;const a=i.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${u}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":F,a||(d.as="script"),d.crossOrigin="",d.href=i,c&&d.setAttribute("nonce",c),document.head.appendChild(d),a)return new Promise((E,N)=>{d.addEventListener("load",E),d.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return e.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return o().catch(r)})};async function L(t,o){let n,l;if(typeof window<"u"&&window.ExcelJS)n=window.ExcelJS,t instanceof File?l=await t.arrayBuffer():l=t;else{const p=await C(()=>import("./exceljs.min-E1y34zqH.js").then(i=>i.e),[]);n=p.default||p,l=t}const e=new n.Workbook;await e.xlsx.load(l);const r=e.getWorksheet(1),s=[],c=r.getRow(1).values.slice(1);r.eachRow((p,i)=>{if(i===1)return;const a={};p.eachCell((u,d)=>{a[c[d-1]]=u.text}),s.push(a)}),o(s)}let f,m,g,h,y;if(typeof window<"u"){const t=await import(path);f=t.db,m=t.ref,g=t.set,h=t.get,y=t.child,console.log("Firebase init:",{db:f,ref:m,set:g,get:h,child:y})}else{const o=await import(new URL("data:text/javascript;base64,Ly8gZmlyZWJhc2Uubm9kZS5qcwoKaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7CmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHNldCwgZ2V0LCBjaGlsZCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJzsKCmNvbnN0IGZpcmViYXNlQ29uZmlnID0gewogIGFwaUtleTogIkFJemFTeUFQRVg5dXRYOUJxajNsY3Zac09kSm5wcmMzQkJ0WHZjQSIsCiAgYXV0aERvbWFpbjogInNocmltcHktNzEwZTIuZmlyZWJhc2VhcHAuY29tIiwKICBwcm9qZWN0SWQ6ICJzaHJpbXB5LTcxMGUyIiwKICBkYXRhYmFzZVVSTDogImh0dHBzOi8vc2hyaW1weS03MTBlMi1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwLyIsCiAgc3RvcmFnZUJ1Y2tldDogInNocmltcHktNzEwZTIuZmlyZWJhc2VzdG9yYWdlLmFwcCIsCiAgbWVzc2FnaW5nU2VuZGVySWQ6ICI4OTYxNjUyNDE4OTYiLAogIGFwcElkOiAiMTo4OTYxNjUyNDE4OTY6d2ViOmRlZDA5NzgwMDZjNjIyNzk1ODAxMWQiCn07Cgpjb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKY29uc3QgZGIgPSBnZXREYXRhYmFzZShhcHApOwoKZXhwb3J0IHsgZGIsIHJlZiwgc2V0LCBnZXQsIGNoaWxkIH07Cg==",import.meta.url));f=o.db,m=o.ref,g=o.set,h=o.get,y=o.child,console.log("Firebase init:",{db:f,ref:m,set:g,get:h,child:y})}function S(t){return t.replace(/[^a-zA-Z0-9_-]/g,"_")}function Z(){const t=document.getElementById("uploadExcel");t&&t.addEventListener("change",n=>{const l=n.target.files[0];L(l,e=>{b(e,w),localStorage.setItem("program",JSON.stringify(e)),Y(e)})});const o=localStorage.getItem("program");o?b(JSON.parse(o),w):W().then(n=>{n&&(b(n,w),localStorage.setItem("program",JSON.stringify(n)))}).catch(n=>{console.error("Ошибка при загрузке из Firebase:",n)})}function b(t,o=()=>{}){const n=document.getElementById("program");n.innerHTML="";const l={};t.forEach(e=>{const r=`Неделя ${e.Неделя}, ${e.День}`;l[r]||(l[r]=[]),l[r].push(e)});for(const[e,r]of Object.entries(l)){const s=document.createElement("div");s.innerHTML=`<h2>${e}</h2>`,r.forEach((c,p)=>{const i=`${e}-${p}`,a=S(i),u=document.createElement("div");u.innerHTML=`
        <strong>${c.Упражнение}</strong><br>
        Подходы: <input type="number" value="${c.Подходы}" /><br>
        Повторы: <input type="number" value="${c.Повторы}" /><br>
        Вес: <input type="number" value="${c["Вес (кг)"]}" step="0.5" /> кг<br>
        <label><input type="checkbox" id="${a}" ${c.done?"checked":""}/> Выполнено</label><hr>
      `;const d=u.querySelector(`#${a}`);d.addEventListener("change",()=>{o(a,d.checked)}),s.appendChild(u)}),n.appendChild(s)}}function Y(t){g(m(f,"programs/"+"demoUser"),t)}async function W(){const t="demoUser";console.log("loadFromFirebase ref =",m),console.log("loadFromFirebase typeof ref =",typeof m),console.log("loadFromFirebase db =",f);const o=await h(y(m(f),"programs/"+t));return o.exists()?o.val():(console.warn("Нет данных в Firebase"),null)}function w(t,o){g(m(f,`programs/demoUser/completed/${t}`),o)}Z();Z();
