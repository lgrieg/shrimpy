(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();const G="modulepreload",N=function(o){return"/shrimpy/"+o},w={},W=function(t,c,s){let e=Promise.resolve();if(c&&c.length>0){let p=function(l){return Promise.all(l.map(a=>Promise.resolve(a).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");e=p(c.map(l=>{if(l=N(l),l in w)return;w[l]=!0;const a=l.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":G,a||(d.as="script"),d.crossOrigin="",d.href=l,i&&d.setAttribute("nonce",i),document.head.appendChild(d),a)return new Promise((C,Y)=>{d.addEventListener("load",C),d.addEventListener("error",()=>Y(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(r){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=r,window.dispatchEvent(i),!i.defaultPrevented)throw r}return e.then(r=>{for(const i of r||[])i.status==="rejected"&&n(i.reason);return t().catch(n)})};async function v(o,t){let c,s;if(typeof window<"u"&&window.ExcelJS)c=window.ExcelJS,o instanceof File?s=await o.arrayBuffer():s=o;else{const p=await W(()=>import("./exceljs.min-E1y34zqH.js").then(l=>l.e),[]);c=p.default||p,s=o}const e=new c.Workbook;await e.xlsx.load(s);const n=e.getWorksheet(1),r=[],i=n.getRow(1).values.slice(1);n.eachRow((p,l)=>{if(l===1)return;const a={};p.eachCell((u,d)=>{a[i[d-1]]=u.text}),r.push(a)}),t(r)}let g,m,h,Z,f;if(typeof window<"u"){const t=await import(new URL("data:text/javascript;base64,Ly8gZmlyZWJhc2UuanMg4oCUINCx0LXQtyDQuNC80L/QvtGA0YLQvtCyLCDQuNGB0L/QvtC70YzQt9GD0LXRgiDQs9C70L7QsdCw0LvRjNC90YvQuSDQvtCx0YrQtdC60YIgZmlyZWJhc2Ug0L7RgiBjb21wYXQKaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7CmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHNldCwgZ2V0LCBjaGlsZCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJzsKaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnOwpkb3RlbnYuY29uZmlnKCk7CmNvbnN0IGZpcmViYXNlQ29uZmlnID0gewogIGFwaUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSwKICBhdXRoRG9tYWluOiAic2hyaW1weS03MTBlMi5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogInNocmltcHktNzEwZTIiLAogIGRhdGFiYXNlVVJMOiAiaHR0cHM6Ly9zaHJpbXB5LTcxMGUyLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvIiwKICBzdG9yYWdlQnVja2V0OiAic2hyaW1weS03MTBlMi5maXJlYmFzZXN0b3JhZ2UuYXBwIiwKICBtZXNzYWdpbmdTZW5kZXJJZDogIjg5NjE2NTI0MTg5NiIsCiAgYXBwSWQ6ICIxOjg5NjE2NTI0MTg5Njp3ZWI6ZGVkMDk3ODAwNmM2MjI3OTU4MDExZCIKfTsKCmZpcmViYXNlLmluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpOwoKY29uc3QgZGIgPSBmaXJlYmFzZS5kYXRhYmFzZSgpOwoKd2luZG93LmRiID0gZGI7CndpbmRvdy5yZWYgPSAocGF0aCkgPT4gZGIucmVmKHBhdGgpOwp3aW5kb3cuc2V0ID0gKHBhdGgsIHZhbHVlKSA9PiBkYi5yZWYocGF0aCkuc2V0KHZhbHVlKTsKd2luZG93LmdldCA9IChwYXRoKSA9PiBkYi5yZWYocGF0aCkuZ2V0KCk7CndpbmRvdy5jaGlsZCA9IChyZWYsIHN1YnBhdGgpID0+IHJlZi5jaGlsZChzdWJwYXRoKTs=",import.meta.url));g=t.db,m=t.ref,h=t.set,Z=t.get,f=t.child,console.log("Firebase init:",{db:g,ref:m,set:h,get:Z,child:f})}else{const t=await import(new URL("data:text/javascript;base64,Ly8gZmlyZWJhc2Uubm9kZS5qcwppbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7CmRvdGVudi5jb25maWcoKTsKaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7CmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHNldCwgZ2V0LCBjaGlsZCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJzsKCmNvbnN0IGZpcmViYXNlQ29uZmlnID0gewogIGFwaUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSwKICBhdXRoRG9tYWluOiAic2hyaW1weS03MTBlMi5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogInNocmltcHktNzEwZTIiLAogIGRhdGFiYXNlVVJMOiAiaHR0cHM6Ly9zaHJpbXB5LTcxMGUyLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvIiwKICBzdG9yYWdlQnVja2V0OiAic2hyaW1weS03MTBlMi5maXJlYmFzZXN0b3JhZ2UuYXBwIiwKICBtZXNzYWdpbmdTZW5kZXJJZDogIjg5NjE2NTI0MTg5NiIsCiAgYXBwSWQ6ICIxOjg5NjE2NTI0MTg5Njp3ZWI6ZGVkMDk3ODAwNmM2MjI3OTU4MDExZCIKfTsKCmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpOwpjb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7CgpleHBvcnQgeyBkYiwgcmVmLCBzZXQsIGdldCwgY2hpbGQgfTsK",import.meta.url));g=t.db,m=t.ref,h=t.set,Z=t.get,f=t.child,console.log("Firebase init:",{db:g,ref:m,set:h,get:Z,child:f})}function B(o){return o.replace(/[^a-zA-Z0-9_-]/g,"_")}function y(){const o=document.getElementById("uploadExcel");o&&o.addEventListener("change",c=>{const s=c.target.files[0];v(s,e=>{I(e,b),localStorage.setItem("program",JSON.stringify(e)),J(e)})});const t=localStorage.getItem("program");t?I(JSON.parse(t),b):L().then(c=>{c&&(I(c,b),localStorage.setItem("program",JSON.stringify(c)))}).catch(c=>{console.error("Ошибка при загрузке из Firebase:",c)})}function I(o,t=()=>{}){const c=document.getElementById("program");c.innerHTML="";const s={};o.forEach(e=>{const n=`Неделя ${e.Неделя}, ${e.День}`;s[n]||(s[n]=[]),s[n].push(e)});for(const[e,n]of Object.entries(s)){const r=document.createElement("div");r.innerHTML=`<h2>${e}</h2>`,n.forEach((i,p)=>{const l=`${e}-${p}`,a=B(l),u=document.createElement("div");u.innerHTML=`
        <strong>${i.Упражнение}</strong><br>
        Подходы: <input type="number" value="${i.Подходы}" /><br>
        Повторы: <input type="number" value="${i.Повторы}" /><br>
        Вес: <input type="number" value="${i["Вес (кг)"]}" step="0.5" /> кг<br>
        <label><input type="checkbox" id="${a}" ${i.done?"checked":""}/> Выполнено</label><hr>
      `;const d=u.querySelector(`#${a}`);d.addEventListener("change",()=>{t(a,d.checked)}),r.appendChild(u)}),c.appendChild(r)}}function J(o){h(m(g,"programs/"+"demoUser"),o)}async function L(){const o="demoUser";console.log("loadFromFirebase ref =",m),console.log("loadFromFirebase typeof ref =",typeof m),console.log("loadFromFirebase db =",g);const t=await Z(f(m(g),"programs/"+o));return t.exists()?t.val():(console.warn("Нет данных в Firebase"),null)}function b(o,t){h(m(g,`programs/demoUser/completed/${o}`),t)}y();y();
