(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();let s,c,d,u,m;if(typeof window<"u")s=window.db,c=window.ref,d=window.set,u=window.get,m=window.child,console.log("Firebase init (browser):",{db:s,ref:c,set:d,get:u,child:m});else{const t=await import(new URL("data:text/javascript;base64,Ly8gZmlyZWJhc2Uubm9kZS5qcwppbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7CmRvdGVudi5jb25maWcoKTsKaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7CmltcG9ydCB7IGdldERhdGFiYXNlLCByZWYsIHNldCwgZ2V0LCBjaGlsZCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJzsKCmNvbnN0IGZpcmViYXNlQ29uZmlnID0gewogIGFwaUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSwKICBhdXRoRG9tYWluOiAic2hyaW1weS03MTBlMi5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogInNocmltcHktNzEwZTIiLAogIGRhdGFiYXNlVVJMOiAiaHR0cHM6Ly9zaHJpbXB5LTcxMGUyLWRlZmF1bHQtcnRkYi5ldXJvcGUtd2VzdDEuZmlyZWJhc2VkYXRhYmFzZS5hcHAvIiwKICBzdG9yYWdlQnVja2V0OiAic2hyaW1weS03MTBlMi5maXJlYmFzZXN0b3JhZ2UuYXBwIiwKICBtZXNzYWdpbmdTZW5kZXJJZDogIjg5NjE2NTI0MTg5NiIsCiAgYXBwSWQ6ICIxOjg5NjE2NTI0MTg5Njp3ZWI6ZGVkMDk3ODAwNmM2MjI3OTU4MDExZCIKfTsKCmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpOwpjb25zdCBkYiA9IGdldERhdGFiYXNlKGFwcCk7CgpleHBvcnQgeyBkYiwgcmVmLCBzZXQsIGdldCwgY2hpbGQgfTsK",import.meta.url));s=t.db,c=t.ref,d=t.set,u=t.get,m=t.child,console.log("Firebase init (node):",{db:s,ref:c,set:d,get:u,child:m})}function Z(r){return r.replace(/[^a-zA-Z0-9_-]/g,"_")}function I(){const r=document.getElementById("uploadExcel");r&&r.addEventListener("change",n=>{const i=n.target.files[0];parseExcel(i,e=>{f(e,b),localStorage.setItem("program",JSON.stringify(e)),F(e)})});const t=localStorage.getItem("program");t?f(JSON.parse(t),b):G().then(n=>{n&&(f(n,b),localStorage.setItem("program",JSON.stringify(n)))}).catch(n=>{console.error("Ошибка при загрузке из Firebase:",n)})}function f(r,t=()=>{}){const n=document.getElementById("program");n.innerHTML="";const i={};r.forEach(e=>{const o=`Неделя ${e.Неделя}, ${e.День}`;i[o]||(i[o]=[]),i[o].push(e)});for(const[e,o]of Object.entries(i)){const l=document.createElement("div");l.innerHTML=`<h2>${e}</h2>`,o.forEach((a,w)=>{const y=`${e}-${w}`,p=Z(y),g=document.createElement("div");g.innerHTML=`
        <strong>${a.Упражнение}</strong><br>
        Подходы: <input type="number" value="${a.Подходы}" /><br>
        Повторы: <input type="number" value="${a.Повторы}" /><br>
        Вес: <input type="number" value="${a["Вес (кг)"]}" step="0.5" /> кг<br>
        <label><input type="checkbox" id="${p}" ${a.done?"checked":""}/> Выполнено</label><hr>
      `;const h=g.querySelector(`#${p}`);h.addEventListener("change",()=>{t(p,h.checked)}),l.appendChild(g)}),n.appendChild(l)}}function F(r){d(c(s,"programs/"+"demoUser"),r)}async function G(){const r="demoUser";console.log("loadFromFirebase ref =",c),console.log("loadFromFirebase typeof ref =",typeof c),console.log("loadFromFirebase db =",s);const t=await u(m(c(s),"programs/"+r));return t.exists()?t.val():(console.warn("Нет данных в Firebase"),null)}function b(r,t){d(c(s,`programs/demoUser/completed/${r}`),t)}I();I();
